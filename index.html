<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Scroll PNG Sequence Over Video</title>

<style>
  /* Make body transparent so video shows through */
  html, body {
    margin: 0;
    padding: 0;
    height: 500vh; /* Controls scroll length, adjust as needed */
    overflow-x: hidden;
    background: transparent;
  }

  /* Background video styling */
  #background-video {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
  }

  /* Canvas sits on top of video */
  canvas#sequence {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1;
    pointer-events: none; /* allows clicking through */
  }
</style>
</head>

<body>

<!-- Background video -->
<video autoplay muted loop playsinline preload="auto" id="background-video">
  <source src="yourvideo.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

<!-- PNG sequence canvas -->
<canvas id="sequence"></canvas>

<script>
/* ===========================
   SETTINGS
=========================== */

// Total number of PNG frames in your sequence
const frameCount = 85; // ðŸ”¥ Change to your actual frame count

// Path to each frame; assumes 5-digit naming like frame_00000.png
const imagePath = index => `images/frame_${index.toString().padStart(5,'0')}.png`;

/* ===========================
   CANVAS SETUP
=========================== */

const canvas = document.getElementById("sequence");
const context = canvas.getContext("2d");

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

resizeCanvas();
window.addEventListener("resize", resizeCanvas);

/* ===========================
   PRELOAD IMAGES
=========================== */

const images = [];
for (let i = 0; i < frameCount; i++) {
  const img = new Image();
  img.src = imagePath(i);
  images.push(img);
}

/* ===========================
   DRAW IMAGE (COVER MODE)
=========================== */

function drawImageCover(img) {
  const canvasRatio = canvas.width / canvas.height;
  const imgRatio = img.width / img.height;

  let drawWidth, drawHeight;

  if (canvasRatio > imgRatio) {
    drawWidth = canvas.width;
    drawHeight = canvas.width / imgRatio;
  } else {
    drawHeight = canvas.height;
    drawWidth = canvas.height * imgRatio;
  }

  const x = (canvas.width - drawWidth) / 2;
  const y = (canvas.height - drawHeight) / 2;

  context.clearRect(0, 0, canvas.width, canvas.height);
  context.drawImage(img, x, y, drawWidth, drawHeight);
}

/* ===========================
   SCROLL ANIMATION
=========================== */

function render() {
  const scrollTop = document.documentElement.scrollTop;
  const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
  const scrollFraction = scrollTop / maxScroll;

  const frameIndex = Math.min(frameCount - 1, Math.floor(scrollFraction * frameCount));
  drawImageCover(images[frameIndex]);
}

// Draw first frame immediately
images[0].onload = render;

// Update frames on scroll
window.addEventListener("scroll", () => {
  requestAnimationFrame(render);
});
</script>

</body>
</html>
